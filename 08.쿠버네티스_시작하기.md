# 쿠버네티스 시작하기

## 레플리카셋(Replica Set) : 일정 개수의 포드를 유지하는 컨트롤러
앞서 쿠버네티스의 기본 단위인 pod에 대해 살펴보았는데, pod가 종료되는 경우 어떻게 될까?  
일단 pod를 종료시키는 방법에 대해서 알아보자.  
```bash
kubectl delete -f nginx-pod-with-ubuntu.yaml
kubectl delete pods  my-nginx-pod
```
위와 같은 명령어를 사용하면 pod가 종료되는데, 서비스에서 pod를 사용하는 경우 외부 요인에 의해 pod가 종료되지 않도록 하는 것이 중요하다.  
이를 Replica Set을 이용해 구성하는 것이 가능하며 Replica Set는 아래와 같은 특징을 가진다.
- 정해진 수의 동일한 포드가 항상 실행되도록 관리
- 노드 장애 등의 이유로 포드를 실행할 수 없다면 다른 노드에서 포드를 다시 생성
Replica Set를 사용하면 동일한 Nginx pod를 안정적으로 여러 개 운영하는 것이 가능하며, 노드에 장애가 발생하는 경우에도 정해진 개수의 pod를 자동으로 유지해준다.

### Replica Set 사용하기
```yaml
apiVersion: apps/v1
kind: ReplicaSet
metadata:
  name: replicaset-nginx
spec:
  replicas: 3
  selector:
    matchLabels:
      app: my-nginx-pods-label
  template:
    metadata:
      name: my-nginx-pod
      labels: 
        app: my-nginx-pods-label
    spec:
      containers:
      - name: nginx
        image: nginx:latest
        ports:
        - containerPort: 80
```
yaml 파일의 내용중 spec.template를 기준으로 위쪽은 Replica Set에 대한 정의를 나타내며 아래쪽은 pod에 대한 정의를 나타낸다.  
spec.replicas에 정의된 값으로 pod가 유지될 갯수를 정의하게 된다.  

### Replica Set의 동작 원리

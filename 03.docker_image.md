# 도커 이미지
## 도커 이미지 생성
- 컨테이너 내부에 first라는 이름의 파일 생성
```
docker run -i -t --name commit_test ubuntu:14.04
root@acc525940263:/# echo test_first! >> first
```
 - docker commit 명령어
```
docker commit [OPTIONS] CONTATINER [RESPOSITORY[:TAG]]
ex) docker commit -a "alicek106" -m "my first commit" commit_test commit_test:first
```
옵션
-a : author 이미지작성자 표기
-m : 커밋메시지

```
docker run -i -t --name commit_test2 commit_test:first
root@acc525940263:/# echo test_second! >> second
docker commit -a "alicek106" -m "my second commit" commit_test2 commit_test:second
``` 
 - docker images 명령어로 생성되었는지 확인
 
 

## 이미지 구조 이해
도커 이미지를 좀더 효율적으로 다루기 위해 컨테이너가 어떻게 이미지로 만들어지며,
이미지의 구조에대한 이해필요

 - inspect명령어는 컨테이너 뿐만아니라 네트워크, 볼류므 이미지 등 모든 도커 단위의 정보를 얻을때 사용
```
docker inspect ubuntu:14.04
docker inspect commit_test:first
docker inspect commit_test:second
```
- docker 히스토리
 ```
 docker history commit_test:second
 ```
 - docker 이미지 삭제
 ```
 docker rmi commit_test:first
 ```

- 댕글링 이미지 : docker rmi -f 로 강제로 삭제하면 docker 이미지의 이름이 none인 이미지
- 사용중이지 않은 댕글링 이미지 삭제
```
 docker image prune
```
## 이미지 추출
도커 이미지를 별도로 저장하거나 옮기는등 필요에 따라 이미지를 단일 바이너리 파일로 저장해야함.
이때 docker save 명령어를 사용해 파일을 추출할수있음

- 이미지 추출
```
 docker save -o ubuntu_14_04.tar ubuntu:14.04
```

- 추출된 이미지 로드
```
 docker load -i ubuntu_14_04.tar
```

- import,export 명령어로 이미지 추출 및 저장
```
 docker export -o rootFS.tar mycontainer
 docker import rootFS.tar myimage:0.0
 ```

## 이미지 배포
 이미지 배포하는 방법은 두가지가있다.
 1. 도커 허브 이미지 저장소를 사용 (docker push,pull을 사용), 단 비공개 저장소에는 제한이있어 결제를 해야돰
 2. 도커 사설 레지스트리를 사용 (사용자가 직접 이미지 저장소 및 사용되는 서버, 저장공간 관리)
 
 - 도커 허브 저장소  : https://hub.docker.com
 